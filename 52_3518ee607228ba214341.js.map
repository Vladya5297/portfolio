{"version":3,"file":"52_3518ee607228ba214341.js","mappings":"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","sources":["webpack://portfolio/./src/page/applications/spaceInvaders/style.m.css","webpack://portfolio/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://portfolio/./src/page/applications/spaceInvaders/assets/text-logo.png","webpack://portfolio/./src/page/applications/spaceInvaders/game/constants.ts","webpack://portfolio/./src/utils/toolkit/isDefined.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/button/getEventCoords.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/button/getEventHandler.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/button/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/text/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/end/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/end/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/invader/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/utils.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/sprites.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/setup.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/draw.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/move.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/invaders/checkCollision.ts","webpack://portfolio/./src/utils/dom/onKeyUp.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/bullet/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/entities/player/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/player/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/player/sprites.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/setup.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/draw.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/move.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/bullet/checkCollision.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/score/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/controls/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/run/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/player/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/player/setup.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/player/draw.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/score/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/score/setup.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/score/draw.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/controls/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/controls/setup.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/modules/controls/draw.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/init/constants.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/init/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/game/index.ts","webpack://portfolio/./src/page/applications/spaceInvaders/style.m.css?c023","webpack://portfolio/./src/page/applications/spaceInvaders/Content.tsx","webpack://portfolio/./src/utils/dom/resetFocus.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"./assets/space-invaders.woff\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face {\\n    font-family: 'SpaceInvaders';\\n    src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff');\\n    font-style: normal;\\n}\\n\\n.spaceInvaders_root_lNtkt {\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    background-color: silver;\\n    background-size: 150px;\\n}\\n\\n.spaceInvaders_canvas_JNvly {\\n    max-height: 100%;\\n    max-width: 100%;\\n    background-color: black;\\n    outline: 1px solid black;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/page/applications/spaceInvaders/style.m.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,4BAA4B;IAC5B,2DAAqD;IACrD,kBAAkB;AACtB;;AAEA;IACI,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,wBAAwB;IACxB,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,uBAAuB;IACvB,wBAAwB;AAC5B\",\"sourcesContent\":[\"@font-face {\\n    font-family: 'SpaceInvaders';\\n    src: url(./assets/space-invaders.woff) format('woff');\\n    font-style: normal;\\n}\\n\\n.root {\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    background-color: silver;\\n    background-size: 150px;\\n}\\n\\n.canvas {\\n    max-height: 100%;\\n    max-width: 100%;\\n    background-color: black;\\n    outline: 1px solid black;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"root\": \"spaceInvaders_root_lNtkt\",\n\t\"canvas\": \"spaceInvaders_canvas_JNvly\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","module.exports = {\n        srcSet: __webpack_public_path__ + \"6b062cc9ca4233c1-1136.webp\"+\" 1136w\",\n        images: [{path: __webpack_public_path__ + \"6b062cc9ca4233c1-1136.webp\",width: 1136,height: 474}],\n        src: __webpack_public_path__ + \"6b062cc9ca4233c1-1136.webp\",\n        toString: function(){return __webpack_public_path__ + \"6b062cc9ca4233c1-1136.webp\"},\n        placeholder: \"data:image/webp;base64,UklGRk4FAABXRUJQVlA4WAoAAAAQAAAAJwAAEAAAQUxQSCICAAABkChJsmlbc/Bs27Zt27Zt27Zt+977bNu2fW2cc/Zaqx7/ISImQMQu2QOMmS2rieFJTilPRCGRUr5Gt5CqSrm45hCbiIhDpqAMg+6iNbelHUyWtG/w8EZGYhllKoldRGyS8CVac+UV2vAj/iS4IPnDMZhc21BG01wcIuKQ5mg0XsdQBp3LCwJT5IwxbxStHkPE3u0ZxCYidinixhi+H8EYTJNXWFQpSuhGrUYGQXROscs/beKFMkReBM2P3vj5MqYa77242A9taC7O/yW7gzZ8DEZxdzpeZ/BuzevrHF2EhSuv2P+yx3LYY11HKZZdIvxR7e2ERvJ2FBHR3DiHhX8KsTudTptNbLFkDpahzDJuidygc1d8h2EUC9ZjQWlxioit1MwKuUcXmwi+bXrxKXcS/9CUiX56Kl+Ksb602koIjJS4TUYMzXCZ91f5Mt6NYmoPOtbCKhv/K36uvntwc/IKiiarcDPUV1vGowHNzyNUHgErEwdgMfAoblwKzeUAYjg6EbdCWwa0gjy74V1R/x/Xmf8ODl1BaS76o/mW+jPaEBOKx6X4luvlh28MDTg9nxXB0HYHFlEHw+FLTRmFxxitCPW2uJmP2x+5+PPSdpahmPUef07cI5j3sSX5OwJDCcJV5iRb67F1N69++H6IHIviyAfPKSZsIoKp4pBeZsbs4EaXnkqpiIE9XbmyBJy6EPKzTTm/z6FDLxzZGpypRdDHfiJWUDggBgMAAJARAJ0BKigAEQA+UR6NRKOhoRgNVAA4BQS2AFiPf/tHzD8T+aJ2JbDO4BqNsB4gH6we73zs3WAfwD1AP2A9KL9u/g8/ZP0paVK9k/FLKZsCf9jxobuYNUz7YHmy/yXomf6Xk7+Sf+V/XvgI/kv9K/1HA0/syJ2HzwanjoYPs63fPM6KryLVRPwDrG9JxZ2mZi/o8h0AAP3jvuVTW4YdLPOn74ApUVrSJs+5F/flt8kmFfx7ObmywwYH5SH58VUH1QsNAVFDpMy3zFDxuvBO7W4uH/5a7GbxAZq8fg3v+sGyx6SrPo/Z8tSDBSPGbyWUG5e4xdlkikby/JdFJLxwEkR36QHc37rgdGJCfsmfCuT8tBv5F13Y7KfultFAo62WwBHIYxw8qzMZ0pB5v2/Hb/9eGuPbpTC8IEXpo/Yt8rXD2Dg94D2KUIoG88sLwlecZDX/47SVLZQkb+CLqpMPdGRKL0KcROA7lf+ufDvzES78o08ezbK8v8X+FW3OcL/+u26mBbdRVPXQ5XoHmLScAYeGCGqv6UT3o7N6L5wPEh/em8jRCZwxuV7zwpP23SjfIFDKwakI05/uYgSHndoHKosZoYa+5+V/FGOiEqrT+GXtC7eEN/GO6+cJuPAsaHiYIC1n2nd+z8rWGCyxfLAzolVxbn97MB/4tbZ0XU0P0pEJ+GOLE3NFlfplmrMiQJ/Rmf3bG8uOOmtZTuVMuDlSOBhm+HeEJM+x6EOvbMsD+YkVTEMxffiIDzrdDXMQLzM/+SfwIxlcvNQ774gzuBJLSR8CwcFvLkhxcpiW+xJ/Vf+fNDzG8lQLUo2VbWbTD/J0pI5qTnMzX0dpJ7B/xrzL0WX1rSZuHNl7b2FoUAXUpT9Om+m/RSBMDJurAuPkMdhfZse4Yn/ugGs//Amv6O9fuAfzoD6EulkDpYWmvx8wrHiMRkryRYrio3SXaviVO0EFkQDe+q6vIGSk5spo7rAHYoE1zMKHxGxfInkDIiIVwM/l7F9sonwYc2gx+sonwdXaf13O7BFgAA==\",\n        width: 1136,\n        height: 474\n      }","export const GAME_FONT_NAME = 'SpaceInvaders';\n\nexport const GAME_STATE = {\n    INIT: 'init',\n    RUN: 'run',\n    END: 'end',\n} as const;\n","export const isDefined = <T>(value: T | undefined | void): value is T => {\n    return value !== undefined;\n};\n","import {isDefined} from '~/utils/toolkit';\n\nimport type {Position, Size, Bounds} from './types';\n\nexport * from './types';\n\nexport abstract class Entity {\n    abstract x: number;\n    abstract y: number;\n    abstract width: number;\n    abstract height: number;\n    abstract draw(context: CanvasRenderingContext2D): void;\n\n    setPosition({x, y}: Partial<Position>) {\n        if (isDefined(x)) this.x = x;\n        if (isDefined(y)) this.y = y;\n    }\n\n    setSize({width, height}: Partial<Size>) {\n        if (isDefined(width)) this.width = width;\n        if (isDefined(height)) this.height = height;\n    }\n\n    get centerX(): number {\n        return this.x + this.width / 2;\n    }\n\n    get centerY(): number {\n        return this.y + this.height / 2;\n    }\n\n    get rect(): [\n        Position['x'],\n        Position['y'],\n        Size['width'],\n        Size['height']\n    ] {\n        return [this.x, this.y, this.width, this.height];\n    }\n\n    get bounds(): Bounds {\n        const {x, y, width, height} = this;\n\n        return {\n            top: y,\n            bottom: y + height,\n            left: x,\n            right: x + width,\n        };\n    }\n\n    collides(entity: Entity) {\n        const a = this.bounds;\n        const b = entity.bounds;\n\n        const top = Math.max(a.top, b.top);\n        const bottom = Math.min(a.bottom, b.bottom);\n        const left = Math.max(a.left, b.left);\n        const right = Math.min(a.right, b.right);\n\n        if (top < bottom && left < right) return true;\n\n        return false;\n    }\n}\n","type Coords = {\n    x: number;\n    y: number;\n};\n\nexport const getEventCoords = (event: MouseEvent | TouchEvent): Coords => {\n    const target = event.target as HTMLCanvasElement;\n    const rect = target.getBoundingClientRect();\n\n    let offsetX: number;\n    let offsetY: number;\n\n    if ('offsetX' in event && 'offsetY' in event) {\n        offsetX = event.offsetX;\n        offsetY = event.offsetY;\n    } else {\n        const touch = event.changedTouches[0];\n        offsetX = touch.clientX - rect.x;\n        offsetY = touch.clientY - rect.y;\n    }\n\n    const initialWidth = target.width;\n    const initialHeight = target.height;\n\n    const scaleX = rect.width / initialWidth;\n    const scaleY = rect.height / initialHeight;\n\n    const x = offsetX / scaleX;\n    const y = offsetY / scaleY;\n\n    return {x, y};\n};\n","import type {Bounds} from '..';\n\nimport {getEventCoords} from './getEventCoords';\n\nexport const getEventHandler = (\n    bounds: Bounds,\n    handler?: () => void,\n) => (event: MouseEvent | TouchEvent) => {\n    event.preventDefault();\n    const {x, y} = getEventCoords(event);\n\n    if (\n        x > bounds.left\n        && x < bounds.right\n        && y > bounds.top\n        && y < bounds.bottom\n    ) {\n        handler?.();\n    }\n};\n","import {Entity} from '..';\nimport type {Position, Size} from '..';\nimport type {Text} from '../text';\n\nimport {getEventHandler} from './getEventHandler';\nimport type {ButtonStyle} from './types';\n\nexport type ButtonParams = {\n    canvas: HTMLCanvasElement;\n    position: Position;\n    size: Size;\n    style: ButtonStyle;\n    text: Text;\n    onDown?: () => void;\n    onUp?: () => void;\n};\n\nexport class Button extends Entity {\n    x!: number;\n    y!: number;\n    width!: number;\n    height!: number;\n    style: ButtonStyle;\n    text: Text;\n    unmount: () => void;\n\n    constructor({\n        canvas,\n        position,\n        size,\n        style,\n        text,\n        onDown: onMouseDown,\n        onUp: onMouseUp,\n    }: ButtonParams) {\n        super();\n\n        this.setPosition(position);\n        this.setSize(size);\n        this.style = style;\n\n        this.text = text;\n        this.text.setPosition({x: this.centerX, y: this.centerY});\n        this.text.style.textAlign = 'center';\n        this.text.style.textBaseline = 'middle';\n\n        const downHandler = getEventHandler(this.bounds, onMouseDown);\n        const upHandler = getEventHandler(this.bounds, onMouseUp);\n\n        canvas.addEventListener('touchstart', downHandler);\n        canvas.addEventListener('touchend', upHandler);\n\n        canvas.addEventListener('mousedown', downHandler);\n        canvas.addEventListener('mouseup', upHandler);\n\n        this.unmount = () => {\n            canvas.removeEventListener('touchstart', downHandler);\n            canvas.removeEventListener('touchend', upHandler);\n\n            canvas.removeEventListener('mousedown', downHandler);\n            canvas.removeEventListener('mouseup', upHandler);\n        };\n    }\n\n    draw(context: CanvasRenderingContext2D) {\n        context.fillStyle = this.style.backgroundColor;\n        context.fillRect(...this.rect);\n\n        context.strokeStyle = this.style.borderColor;\n        context.lineWidth = this.style.borderWidth;\n        context.strokeRect(...this.rect);\n\n        this.text.draw(context);\n    }\n}\n","import type {DeepPartial} from 'utility-types';\n\nimport {Entity} from '..';\nimport type {Size, Position} from '..';\nimport {GAME_FONT_NAME} from '../../game/constants';\n\nimport type {TextStyle} from './types';\n\nexport type TextParams = DeepPartial<{\n    position: Position;\n    size: Size;\n    style: TextStyle;\n    value: string;\n}>;\n\nexport class Text extends Entity {\n    x = 0;\n    y = 0;\n    /**\n     * States for `maxWidth` param of fillText\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillText#parameters\n     */\n    width!: number;\n    /** Not applicable */\n    height!: number;\n\n    style: TextStyle = {\n        color: 'white',\n        fontFamily: GAME_FONT_NAME,\n        fontSize: 20,\n        textAlign: 'left',\n        textBaseline: 'top',\n    };\n\n    value = '';\n\n    constructor({\n        position,\n        size,\n        style,\n        value,\n    }: TextParams) {\n        super();\n\n        if (position) this.setPosition(position);\n        if (size) this.setSize(size);\n        if (style) this.style = {...this.style, ...style};\n        if (value) this.value = value;\n    }\n\n    measure(context: CanvasRenderingContext2D): Size {\n        context.font = `${this.style.fontSize}px ${this.style.fontFamily}`;\n        const metrics = context.measureText(this.value);\n\n        const width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\n        const height = metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent;\n\n        return {width, height};\n    }\n\n    draw(context: CanvasRenderingContext2D) {\n        context.fillStyle = this.style.color;\n        context.font = `${this.style.fontSize}px ${this.style.fontFamily}`;\n        context.textAlign = this.style.textAlign;\n        context.textBaseline = this.style.textBaseline;\n        context.fillText(this.value, this.x, this.y, this.width);\n    }\n}\n","import type {ButtonStyle} from '../../entities/button/types';\n\nexport const titleFontSize = 40;\nexport const subtitleFontSize = 20;\nexport const buttonFontSize = 30;\n\nexport const buttonWidth = 150;\nexport const buttonHeight = 60;\nexport const buttonStyle: ButtonStyle = {\n    backgroundColor: 'transparent',\n    borderColor: 'white',\n    borderWidth: 2,\n};\n","import {onKeyDown} from '~/utils/dom';\nimport {KEYBOARD_KEY} from '~/constants/keyboard';\n\nimport {Button} from '../../entities/button';\nimport {Text} from '../../entities/text';\nimport {GAME_STATE} from '../constants';\nimport type {Game} from '..';\n\nimport {\n    buttonFontSize,\n    buttonHeight,\n    buttonStyle,\n    buttonWidth,\n    subtitleFontSize,\n    titleFontSize,\n} from './constants';\n\nexport function end(this: Game, {score}: {score: number}) {\n    const canvas = this.canvas;\n    const context = this.context;\n\n    const title = new Text({\n        value: 'Game Over',\n        position: {x: canvas.width / 2, y: canvas.height / 4},\n        style: {\n            fontSize: titleFontSize,\n            textAlign: 'center',\n        },\n    });\n\n    const subtitle = new Text({\n        value: `score: ${score}`,\n        position: {x: canvas.width / 2, y: canvas.height / 3},\n        style: {\n            fontSize: subtitleFontSize,\n            textAlign: 'center',\n        },\n    });\n\n    const button = new Button({\n        canvas,\n        position: {\n            x: canvas.width / 2 - buttonWidth / 2,\n            y: canvas.height * (3 / 4) - buttonHeight,\n        },\n        size: {\n            width: buttonWidth,\n            height: buttonHeight,\n        },\n        text: new Text({\n            value: 'Restart',\n            style: {fontSize: buttonFontSize},\n        }),\n        style: buttonStyle,\n        onDown: () => {\n            const event = new KeyboardEvent('keydown', {key: ' '});\n            document.dispatchEvent(event);\n        },\n    });\n\n    title.draw(context);\n    subtitle.draw(context);\n    button.draw(context);\n\n    this.garbage.add(button.unmount);\n\n    // Setting delay for event listener to avoid accident press\n    setTimeout(() => {\n        const unmount = onKeyDown(KEYBOARD_KEY.SPACE, () => {\n            this.changeState(GAME_STATE.INIT);\n        });\n\n        this.garbage.add(unmount);\n    }, 300);\n}\n","import {Entity} from '..';\nimport type {Position, Size} from '..';\n\nimport type {Sprites} from './types';\n\nexport type InvaderParams = {\n    position: Position;\n    size: Size;\n    speedX: number;\n    speedY: number;\n    sprites: Sprites;\n};\n\nexport class Invader extends Entity {\n    x!: number;\n    y!: number;\n    width!: number;\n    height!: number;\n    sprites: Sprites;\n    speedX: number;\n    speedY: number;\n    private spriteIndex = 0;\n\n    constructor({\n        position,\n        size,\n        speedX,\n        speedY,\n        sprites,\n    }: InvaderParams) {\n        super();\n\n        this.setPosition(position);\n        this.setSize(size);\n        this.sprites = sprites;\n        this.speedX = speedX;\n        this.speedY = speedY;\n    }\n\n    get image() {\n        return this.sprites[this.spriteIndex];\n    }\n\n    toggleImage() {\n        // eslint-disable-next-line no-bitwise\n        this.spriteIndex ^= 1;\n    }\n\n    moveX() {\n        this.x += this.speedX;\n    }\n\n    moveY() {\n        this.y += this.speedY;\n    }\n\n    toggleMoveDirection() {\n        this.speedX = -this.speedX;\n    }\n\n    speedUp(value: number) {\n        if (this.speedX >= 0) {\n            this.speedX += value;\n        }\n        if (this.speedX < 0) {\n            this.speedX -= value;\n        }\n    }\n\n    draw(context: CanvasRenderingContext2D) {\n        context.drawImage(this.image, ...this.rect);\n    }\n}\n","export const makeSvgImage = (image: string): HTMLImageElement => {\n    const img = new Image();\n    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(image)}`;\n    return img;\n};\n","import {makeSvgImage} from '../utils';\n\nconst images = {\n    alienTop1: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M30 0h10v10H30V0ZM0 70h10v10H0V70Zm10-10h10v10H10V60Zm10 10h10v10H20V70Zm30 0h10v10H50V70Zm20 0h10v10H70V70ZM60 60h10v10H60V60Zm-20 0h10v10H40V60Zm-10 0h10v10H30V60Zm20-10h10v10H50V50Zm-30 0h10v10H20V50Zm50-10h10v10H70V40Zm0-10h10v10H70V30ZM60 40h10v10H60V40Zm0-10h10v10H60V30ZM50 40h10v10H50V40Zm-10 0h10v10H40V40Zm0-10h10v10H40V30ZM30 40h10v10H30V40Zm0-10h10v10H30V30ZM20 40h10v10H20V40Zm-10 0h10v10H10V40ZM0 40h10v10H0V40Zm0-10h10v10H0V30Zm10 0h10v10H10V30Zm50-10h10v10H60V20Zm-10 0h10v10H50V20Zm-10 0h10v10H40V20Zm-10 0h10v10H30V20Zm-20 0h10v10H10V20Zm10 0h10v10H20V20Zm30-10h10v10H50V10Zm-10 0h10v10H40V10Zm-20 0h10v10H20V10Zm10 0h10v10H30V10ZM40 0h10v10H40V0Z\"/></svg>',\n    alienTop2: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M30 0h10v10H30V0ZM10 20h10v10H10V20Zm0 10h10v10H10V30ZM0 30h10v10H0V30Zm0 10h10v10H0V40Zm10 0h10v10H10V40Zm0 10h10v10H10V50ZM0 60h10v10H0V60Zm10 10h10v10H10V70Zm10-30h10v10H20V40Zm10-10h10v10H30V30Zm0 10h10v10H30V40Zm0 10h10v10H30V50ZM20 20h10v10H20V20Zm10 0h10v10H30V20ZM20 10h10v10H20V10Zm10 0h10v10H30V10ZM50 0H40v10h10V0Zm20 20H60v10h10V20Zm0 10H60v10h10V30Zm10 0H70v10h10V30Zm0 10H70v10h10V40Zm-10 0H60v10h10V40Zm0 10H60v10h10V50Zm10 10H70v10h10V60ZM70 70H60v10h10V70ZM60 40H50v10h10V40ZM50 30H40v10h10V30Zm0 10H40v10h10V40Zm0 10H40v10h10V50Zm10-30H50v10h10V20Zm-10 0H40v10h10V20Zm10-10H50v10h10V10Zm-10 0H40v10h10V10Z\"/></svg>',\n    alienMid1: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"110\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M20 0h10v10H20V0Zm10 10h10v10H30V10Zm0 10h10v10H30V20Zm10 0h10v10H40V20Zm10 0h10v10H50V20ZM40 30h10v10H40V30Zm0 10h10v10H40V40Zm0 10h10v10H40V50Zm10-20h10v10H50V30Zm0 10h10v10H50V40Zm0 10h10v10H50V50Zm10-30h10v10H60V20Zm0 10h10v10H60V30Zm0 10h10v10H60V40Zm0 10h10v10H60V50Zm10 0h10v10H70V50Zm0-10h10v10H70V40Zm0-20h10v10H70V20Zm0-10h10v10H70V10ZM80 0h10v10H80V0Zm0 20h10v10H80V20Zm0 10h10v10H80V30Zm10 0h10v10H90V30Zm0 10h10v10H90V40Zm10 0h10v10h-10V40Zm0-10h10v10h-10V30Zm0-10h10v10h-10V20Zm0-10h10v10h-10V10ZM90 50h10v10H90V50ZM80 40h10v10H80V40Zm0 10h10v10H80V50Zm0 10h10v10H80V60Zm10 10h10v10H90V70ZM30 40h10v10H30V40Zm0 10h10v10H30V50ZM20 20h10v10H20V20Zm0 10h10v10H20V30Zm-10 0h10v10H10V30ZM0 30h10v10H0V30Zm0-10h10v10H0V20Zm0-10h10v10H0V10Zm0 30h10v10H0V40Zm10 0h10v10H10V40Zm0 10h10v10H10V50Zm10 0h10v10H20V50Zm0 10h10v10H20V60ZM10 70h10v10H10V70Zm10-30h10v10H20V40Z\"/></svg>',\n    alienMid2: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"110\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M80 10H70v10h10V10Zm0 10H70v10h10V20Zm10 0H80v10h10V20Zm0 10H80v10h10V30Zm10 0H90v10h10V30Zm0 10H90v10h10V40Zm10 0h-10v10h10V40Zm0 10h-10v10h10V50Zm0 10h-10v10h10V60ZM90 40H80v10h10V40Zm0 10H80v10h10V50Zm0 10H80v10h10V60ZM80 70H70v10h10V70Zm-10 0H60v10h10V70Zm10-30H70v10h10V40Zm0 10H70v10h10V50ZM70 20H60v10h10V20Zm0 10H60v10h10V30Zm0 10H60v10h10V40Zm0 10H60v10h10V50ZM60 20H50v10h10V20Zm0 10H50v10h10V30Zm0 10H50v10h10V40Zm0 10H50v10h10V50ZM90 0H80v10h10V0ZM30 10h10v10H30V10Zm0 10h10v10H30V20Zm-10 0h10v10H20V20Zm0 10h10v10H20V30Zm-10 0h10v10H10V30Zm0 10h10v10H10V40ZM0 40h10v10H0V40Zm0 10h10v10H0V50Zm0 10h10v10H0V60Zm20-20h10v10H20V40Zm0 10h10v10H20V50Zm0 10h10v10H20V60Zm10 10h10v10H30V70Zm10 0h10v10H40V70ZM30 40h10v10H30V40Zm0 10h10v10H30V50Zm10-30h10v10H40V20Zm0 10h10v10H40V30Zm0 10h10v10H40V40Zm0 10h10v10H40V50Z\"/><path fill=\"#D9D9D9\" d=\"M50 20h10v10H50V20Zm0 10h10v10H50V30Zm0 10h10v10H50V40Zm0 10h10v10H50V50ZM20 0h10v10H20V0Z\"/></svg>',\n    alienBot1: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"120\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M40 0h10v10H40V0Zm0 10h10v10H40V10Zm0 10h10v10H40V20ZM50 0h10v10H50V0Zm0 10h10v10H50V10Zm0 10h10v10H50V20Zm0 10h10v10H50V30Zm0 10h10v10H50V40Zm-10 0h10v10H40V40ZM30 10h10v10H30V10Zm0 10h10v10H30V20ZM20 10h10v10H20V10Zm-10 0h10v10H10V10Zm10 10h10v10H20V20Zm-10 0h10v10H10V20ZM0 20h10v10H0V20Zm0 10h10v10H0V30Zm10 0h10v10H10V30Zm10 0h10v10H20V30ZM0 40h10v10H0V40Zm10 0h10v10H10V40Zm10 0h10v10H20V40Zm10 0h10v10H30V40Zm10 10h10v10H40V50Zm-10 0h10v10H30V50Zm0 10h10v10H30V60Zm-10 0h10v10H20V60ZM10 70h10v10H10V70ZM0 70h10v10H0V70ZM80 0H70v10h10V0Zm0 10H70v10h10V10Zm0 10H70v10h10V20ZM70 0H60v10h10V0Zm0 10H60v10h10V10Zm0 10H60v10h10V20Zm0 10H60v10h10V30Zm0 10H60v10h10V40Zm10 0H70v10h10V40Zm10-30H80v10h10V10Zm0 10H80v10h10V20Zm10-10H90v10h10V10Zm10 0h-10v10h10V10Zm-10 10H90v10h10V20Zm10 0h-10v10h10V20Zm10 0h-10v10h10V20Zm0 10h-10v10h10V30Zm-10 0h-10v10h10V30Zm-10 0H90v10h10V30Zm20 10h-10v10h10V40Zm-10 0h-10v10h10V40Zm-10 0H90v10h10V40Zm-10 0H80v10h10V40ZM80 50H70v10h10V50Zm10 0H80v10h10V50Zm0 10H80v10h10V60Zm10 0H90v10h10V60Zm10 10h-10v10h10V70Zm10 0h-10v10h10V70Z\"/></svg>',\n    alienBot2: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"120\" height=\"80\" fill=\"white\"><path fill=\"#D9D9D9\" d=\"M40 0h10v10H40V0Zm10 0h10v10H50V0Zm0 10h10v10H50V10Zm-10 0h10v10H40V10Zm-10 0h10v10H30V10Zm-10 0h10v10H20V10Zm-10 0h10v10H10V10Zm0 10h10v10H10V20ZM0 20h10v10H0V20Zm0 10h10v10H0V30Zm10 0h10v10H10V30ZM0 40h10v10H0V40Zm10 0h10v10H10V40Zm10-20h10v10H20V20Zm10 0h10v10H30V20Zm10 0h10v10H40V20Zm10 0h10v10H50V20Zm0 10h10v10H50V30Zm-30 0h10v10H20V30Zm0 10h10v10H20V40Zm10 0h10v10H30V40Zm10 0h10v10H40V40Zm10 0h10v10H50V40ZM40 50h10v10H40V50Zm-10 0h10v10H30V50Zm-10 0h10v10H20V50Zm0 10h10v10H20V60Zm-10 0h10v10H10V60Zm10 10h10v10H20V70Zm10 0h10v10H30V70ZM80 0H70v10h10V0ZM70 0H60v10h10V0Zm0 10H60v10h10V10Zm10 0H70v10h10V10Zm10 0H80v10h10V10Zm10 0H90v10h10V10Zm10 0h-10v10h10V10Zm0 10h-10v10h10V20Zm10 0h-10v10h10V20Zm0 10h-10v10h10V30Zm-10 0h-10v10h10V30Zm10 10h-10v10h10V40Zm-10 0h-10v10h10V40Zm-10-20H90v10h10V20Zm-10 0H80v10h10V20Zm-10 0H70v10h10V20Zm-10 0H60v10h10V20Zm0 10H60v10h10V30Zm30 0H90v10h10V30Zm0 10H90v10h10V40Zm-10 0H80v10h10V40Zm-10 0H70v10h10V40Zm-10 0H60v10h10V40Zm10 10H70v10h10V50Zm10 0H80v10h10V50Zm10 0H90v10h10V50Zm0 10H90v10h10V60Zm10 0h-10v10h10V60Zm-10 10H90v10h10V70Zm-10 0H80v10h10V70Z\"/></svg>',\n};\n\ntype Key = keyof typeof images;\n\nexport const sprites = Object.entries(images)\n    .reduce((acc, [key, value]) => {\n        acc[key as Key] = makeSvgImage(value);\n        return acc;\n    }, {} as Record<Key, HTMLImageElement>);\n","import {sprites} from './sprites';\nimport type {InvaderConfig} from './types';\n\nexport const invadersConfigs: InvaderConfig[] = [\n    {\n        width: 26,\n        height: 26,\n        sprites: [sprites.alienTop1, sprites.alienTop2],\n    },\n    {\n        width: 26,\n        height: 26,\n        sprites: [sprites.alienTop1, sprites.alienTop2],\n    },\n    {\n        width: 36,\n        height: 26,\n        sprites: [sprites.alienMid1, sprites.alienMid2],\n    },\n    {\n        width: 36,\n        height: 26,\n        sprites: [sprites.alienMid1, sprites.alienMid2],\n    },\n    {\n        width: 40,\n        height: 26,\n        sprites: [sprites.alienBot1, sprites.alienBot2],\n    },\n    {\n        width: 40,\n        height: 26,\n        sprites: [sprites.alienBot1, sprites.alienBot2],\n    },\n];\n\nexport const invadersMaxWidth = Math.max(...invadersConfigs.map(({width}) => width));\nexport const initialSpeedX = 0.5;\nexport const initialSpeedY = 8;\nexport const invaderPerRow = 7;\nexport const invadersGap = 10;\n","import type {Module} from '../../types';\n\nimport {checkCollision} from './checkCollision';\nimport {draw} from './draw';\nimport {move} from './move';\nimport {setup} from './setup';\n\nexport const invaders: Module = {\n    setup,\n    raf: [draw, move, checkCollision],\n};\n","import {Invader} from '../../../entities/invader';\nimport type {Setup} from '../../types';\n\nimport {\n    initialSpeedX,\n    initialSpeedY,\n    invaderPerRow,\n    invadersConfigs,\n    invadersGap,\n    invadersMaxWidth,\n} from './constants';\n\nexport const setup: Setup = (ctx, runtime) => {\n    const iids: ReturnType<typeof setInterval>[] = [];\n\n    let y = 50;\n\n    const invaders = invadersConfigs.flatMap(({width, height, sprites}) => {\n        const offset = (invadersMaxWidth - width) / 2;\n\n        // Create row of invaders\n        const result = Array.from({length: invaderPerRow}).map((_, i) => {\n            // Calculate initial position of each invader in row\n            const position = {\n                x: offset + i * (width + offset + invadersGap + offset),\n                y,\n            };\n\n            return new Invader({\n                position,\n                size: {width, height},\n                sprites,\n                speedX: initialSpeedX,\n                speedY: initialSpeedY,\n            });\n        });\n\n        // Setup next row position\n        y += height + invadersGap;\n\n        return result;\n    });\n\n    // Setup animated sprites\n    invaders.forEach(invader => {\n        const iid = setInterval(() => invader.toggleImage(), 1000);\n\n        iids.push(iid);\n    });\n\n    runtime.invaders = new Set(invaders);\n\n    return () => {\n        iids.forEach(clearInterval);\n    };\n};\n","import type {RafHandler} from '../../types';\n\nexport const draw: RafHandler = ({context}, {invaders}) => {\n    invaders.forEach(invader => invader.draw(context));\n};\n","import type {RafHandler} from '../../types';\n\nexport const move: RafHandler = ({canvas}, {invaders, score}) => {\n    let rowEnd = false;\n\n    invaders.forEach(invader => {\n        invader.moveX();\n\n        const invaderBounds = invader.bounds;\n        if (invaderBounds.right > canvas.width || invaderBounds.left < 0) {\n            rowEnd = true;\n        }\n    });\n\n    if (!rowEnd) return;\n\n    invaders.forEach(invader => {\n        invader.toggleMoveDirection();\n        invader.moveY();\n    });\n\n    // Decrease score\n    if (score.value > 0) {\n        score.value -= 1;\n    }\n};\n","import type {RafHandler} from '../../types';\n\nexport const checkCollision: RafHandler = (ctx, runtime) => {\n    const {invaders, player} = runtime;\n\n    let gameover = false;\n\n    invaders.forEach(invader => {\n        if (invader.bounds.bottom >= player.bounds.top) {\n            gameover = true;\n        }\n    });\n\n    if (gameover) {\n        runtime.score.value = 0;\n        runtime.gameover = true;\n    }\n};\n","import {onKeyEvent} from './onKeyEvent';\n\ntype Unsubscribe = () => void;\n\ntype Options = {\n    target?: HTMLElement;\n};\n\nexport const onKeyUp = (\n    key: string,\n    handler: (event: KeyboardEvent) => void,\n    options?: Options,\n): Unsubscribe => {\n    return onKeyEvent('keyup', key, handler, options);\n};\n","import type {Position, Size} from '..';\nimport {Entity} from '..';\n\nexport type BulletParams = {\n    position: Position;\n    size: Size;\n    speed: number;\n    color: string;\n};\n\nexport class Bullet extends Entity {\n    x!: number;\n    y!: number;\n    width!: number;\n    height!: number;\n    speed: number;\n    color: string;\n\n    constructor({\n        position,\n        size,\n        speed,\n        color,\n    }: BulletParams) {\n        super();\n\n        this.setPosition(position);\n        this.setSize(size);\n        this.speed = speed;\n        this.color = color;\n    }\n\n    move() {\n        this.y -= this.speed;\n    }\n\n    draw(context: CanvasRenderingContext2D) {\n        context.fillStyle = this.color;\n        context.fillRect(...this.rect);\n    }\n}\n","import {Entity} from '..';\nimport type {Position, Size} from '..';\nimport {Bullet} from '../bullet';\nimport type {BulletParams} from '../bullet';\n\nexport type PlayerParams = {\n    position: Position;\n    size: Size;\n    speed: number;\n    image: HTMLImageElement;\n};\n\nexport class Player extends Entity {\n    x!: number;\n    y!: number;\n    width!: number;\n    height!: number;\n    speed: number;\n    image: HTMLImageElement;\n\n    constructor({\n        position,\n        size,\n        speed,\n        image,\n    }: PlayerParams) {\n        super();\n\n        this.setPosition(position);\n        this.setSize(size);\n        this.speed = speed;\n        this.image = image;\n    }\n\n    moveLeft() {\n        this.x -= this.speed;\n    }\n\n    moveRight() {\n        this.x += this.speed;\n    }\n\n    fire({size, speed, color}: Omit<BulletParams, 'position'>): Bullet {\n        const {width, height} = size;\n\n        const position = {\n            x: this.centerX - width / 2,\n            y: this.y - height,\n        };\n\n        return new Bullet({position, size, speed, color});\n    }\n\n    draw(context: CanvasRenderingContext2D) {\n        context.drawImage(this.image, ...this.rect);\n    }\n}\n","export const playerWidth = 40;\nexport const playerHeight = 20;\nexport const playerSpeed = 5;\n","import {makeSvgImage} from '../utils';\n\nconst image = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"53\" fill=\"white\"><path fill=\"#fff\" d=\"M0 26.9818V53h100V26.9818h-7.8431v-7.7091h-32.353V7.70909h-6.8627V0h-5.8824v7.70909h-6.8627V19.2727H7.84314v7.7091H0Z\"/></svg>';\n\nexport const sprites = {\n    player: makeSvgImage(image),\n};\n","import type {Module} from '../../types';\n\nimport {checkCollision} from './checkCollision';\nimport {draw} from './draw';\nimport {move} from './move';\nimport {setup} from './setup';\n\nexport const bullet: Module = {\n    setup,\n    raf: [draw, move, checkCollision],\n};\n","import {onKeyDown} from '~/utils/dom';\nimport {KEYBOARD_KEY} from '~/constants/keyboard';\n\nimport type {Setup} from '../../types';\n\nimport {bulletColor, bulletHeight, bulletSpeed, bulletWidth} from './constants';\n\nexport const setup: Setup = (ctx, runtime) => {\n    const clear = onKeyDown(KEYBOARD_KEY.SPACE, () => {\n        if (runtime.bullet) return;\n\n        runtime.bullet = runtime.player.fire({\n            size: {width: bulletWidth, height: bulletHeight},\n            speed: bulletSpeed,\n            color: bulletColor,\n        });\n    });\n\n    return clear;\n};\n","export const bulletWidth = 4;\nexport const bulletHeight = 10;\nexport const bulletSpeed = 7;\nexport const bulletColor = 'yellow';\n","import type {RafHandler} from '../../types';\n\nexport const draw: RafHandler = ({context}, {bullet}) => {\n    if (!bullet) return;\n\n    bullet.draw(context);\n};\n","import type {RafHandler} from '../../types';\n\nexport const move: RafHandler = (ctx, runtime) => {\n    const {bullet} = runtime;\n\n    if (!bullet) return;\n\n    bullet.move();\n\n    // Remove bullet that is off the canvas\n    if (bullet.y < 0) {\n        runtime.bullet = null;\n    }\n};\n","import type {Invader} from '../../../entities/invader';\nimport type {RafHandler} from '../../types';\n\nconst speedUp = (invaders: Set<Invader>) => {\n    invaders.forEach(invader => invader.speedUp(0.1));\n};\n\nexport const checkCollision: RafHandler = (ctx, runtime) => {\n    const {bullet, invaders} = runtime;\n\n    if (!bullet) return;\n\n    invaders.forEach(invader => {\n        if (!invader.collides(bullet)) return;\n\n        // Remove bullet and invader\n        runtime.bullet = null;\n        invaders.delete(invader);\n\n        // Increase score\n        runtime.score.value += 10;\n\n        // Increase speed\n        speedUp(invaders);\n\n        // Check game over\n        if (invaders.size === 0) {\n            runtime.gameover = true;\n        }\n    });\n};\n","import type {TextStyle} from '../../../entities/text/types';\n\nexport const textStyle: Partial<TextStyle> = {\n    fontSize: 20,\n    textAlign: 'left',\n};\n","import type {ButtonStyle} from '../../../entities/button/types';\n\nexport const buttonGap = 10;\nexport const buttonHeight = 50;\nexport const buttonFontSize = 20;\nexport const buttonStyle: ButtonStyle = {\n    backgroundColor: 'transparent',\n    borderColor: 'white',\n    borderWidth: 2,\n};\n\nexport const buttonsConfig = [\n    {\n        text: '<',\n        onMouseDown: () => {\n            const event = new KeyboardEvent('keydown', {key: 'ArrowLeft'});\n            document.dispatchEvent(event);\n        },\n        onMouseUp: () => {\n            const event = new KeyboardEvent('keyup', {key: 'ArrowLeft'});\n            document.dispatchEvent(event);\n        },\n    },\n    {\n        text: 'fire',\n        onMouseDown: () => {\n            const event = new KeyboardEvent('keydown', {key: ' '});\n            document.dispatchEvent(event);\n        },\n    },\n    {\n        text: '>',\n        onMouseDown: () => {\n            const event = new KeyboardEvent('keydown', {key: 'ArrowRight'});\n            document.dispatchEvent(event);\n        },\n        onMouseUp: () => {\n            const event = new KeyboardEvent('keyup', {key: 'ArrowRight'});\n            document.dispatchEvent(event);\n        },\n    },\n];\n","import {isDefined} from '~/utils/toolkit';\n\nimport {invaders} from '../modules/invaders';\nimport {player} from '../modules/player';\nimport {bullet} from '../modules/bullet';\nimport {score} from '../modules/score';\nimport {controls} from '../modules/controls';\nimport {GAME_STATE} from '../constants';\nimport type {Context, Runtime} from '../types';\nimport type {Game} from '..';\n\nconst modules = [\n    invaders,\n    player,\n    bullet,\n    score,\n    controls,\n];\n\nexport function run(this: Game) {\n    const canvas = this.canvas;\n    const context = this.context;\n    const ctx: Context = {context, canvas};\n\n    const runtime = {\n        invaders: new Set(),\n        bullet: null,\n        player: {},\n        controls: {},\n        score: {},\n    } as Runtime;\n\n    modules\n        .map(({setup}) => setup?.(ctx, runtime))\n        .filter(isDefined)\n        .forEach(cb => this.garbage.add(cb));\n\n    const draw = () => {\n        this.clear();\n\n        modules.forEach(({raf}) => {\n            raf.forEach(handler => handler(ctx, runtime));\n        });\n\n        if (runtime.gameover) {\n            this.changeState(GAME_STATE.END, {score: runtime.score.value});\n            return;\n        }\n\n        this.rafId = requestAnimationFrame(draw);\n    };\n\n    draw();\n}\n","import type {Module} from '../../types';\n\nimport {draw} from './draw';\nimport {setup} from './setup';\n\nexport const player: Module = {\n    setup,\n    raf: [draw],\n};\n","import {onKeyDown, onKeyUp} from '~/utils/dom';\nimport {KEYBOARD_KEY} from '~/constants/keyboard';\n\nimport {Player} from '../../../entities/player';\nimport type {Setup} from '../../types';\n\nimport {playerHeight, playerSpeed, playerWidth} from './constants';\nimport {sprites} from './sprites';\n\nexport const setup: Setup = ({canvas}, runtime) => {\n    const position = {\n        x: canvas.width / 2 - playerWidth / 2,\n        y: canvas.height - 90,\n    };\n\n    const size = {\n        width: playerWidth,\n        height: playerHeight,\n    };\n\n    runtime.player = new Player({\n        position,\n        size,\n        speed: playerSpeed,\n        image: sprites.player,\n    });\n\n    runtime.controls.rightPressed = false;\n    runtime.controls.leftPressed = false;\n\n    const clearKeyDownLeft = onKeyDown(\n        KEYBOARD_KEY.ARROW_LEFT,\n        () => {runtime.controls.leftPressed = true},\n    );\n    const clearKeyDownRight = onKeyDown(\n        KEYBOARD_KEY.ARROW_RIGHT,\n        () => {runtime.controls.rightPressed = true},\n    );\n    const clearKeyUpLeft = onKeyUp(\n        KEYBOARD_KEY.ARROW_LEFT,\n        () => {runtime.controls.leftPressed = false},\n    );\n    const clearKeyUpRight = onKeyUp(\n        KEYBOARD_KEY.ARROW_RIGHT,\n        () => {runtime.controls.rightPressed = false},\n    );\n\n    return () => {\n        clearKeyDownLeft();\n        clearKeyDownRight();\n        clearKeyUpLeft();\n        clearKeyUpRight();\n    };\n};\n","import type {RafHandler} from '../../types';\n\nexport const draw: RafHandler = ({context, canvas}, {player, controls}) => {\n    player.draw(context);\n    const bounds = player.bounds;\n\n    // Check if move right available\n    if (controls.rightPressed && bounds.right < canvas.width) {\n        player.moveRight();\n    }\n\n    // Check if move left available\n    if (controls.leftPressed && bounds.left > 0) {\n        player.moveLeft();\n    }\n};\n","import type {Module} from '../../types';\n\nimport {draw} from './draw';\nimport {setup} from './setup';\n\nexport const score: Module = {\n    setup,\n    raf: [draw],\n};\n","import {Text} from '../../../entities/text';\nimport type {Setup} from '../../types';\n\nimport {textStyle} from './constants';\n\nexport const setup: Setup = (ctx, runtime) => {\n    runtime.score.value = 0;\n    runtime.score.text = new Text({\n        value: 'score: 0',\n        position: {x: 10, y: 20},\n        style: textStyle,\n    });\n};\n","import type {RafHandler} from '../../types';\n\nexport const draw: RafHandler = ({context}, runtime) => {\n    const {value, text} = runtime.score;\n    text.value = `score: ${value}`;\n    text.draw(context);\n};\n","import type {Module} from '../../types';\n\nimport {draw} from './draw';\nimport {setup} from './setup';\n\nexport const controls: Module = {\n    setup,\n    raf: [draw],\n};\n","import {Button} from '../../../entities/button';\nimport {Text} from '../../../entities/text';\nimport type {Setup} from '../../types';\n\nimport {\n    buttonFontSize,\n    buttonGap,\n    buttonHeight,\n    buttonStyle,\n    buttonsConfig,\n} from './constants';\n\nexport const setup: Setup = ({canvas}, runtime) => {\n    const gap = buttonGap;\n    const width = (canvas.width - gap * 4) / 3;\n    const height = buttonHeight;\n    const y = canvas.height - height - gap;\n\n    const buttons = buttonsConfig.map(({\n        text,\n        onMouseDown,\n        onMouseUp,\n    }, i) => {\n        return new Button({\n            canvas,\n            position: {\n                x: gap + i * (width + gap),\n                y,\n            },\n            size: {width, height},\n            style: buttonStyle,\n            text: new Text({\n                value: text,\n                style: {fontSize: buttonFontSize},\n            }),\n            onDown: onMouseDown,\n            onUp: onMouseUp,\n        });\n    });\n\n    runtime.controls.buttons = buttons;\n\n    return () => {\n        buttons.forEach(button => button.unmount());\n    };\n};\n","import type {RafHandler} from '../../types';\n\nexport const draw: RafHandler = ({context}, {controls}) => {\n    controls.buttons.forEach(button => button.draw(context));\n};\n","import type {ButtonStyle} from '../../entities/button/types';\nimport type {TextStyle} from '../../entities/text/types';\n\nexport const buttonWidth = 120;\nexport const buttonHeight = 60;\nexport const buttonStyle: ButtonStyle = {\n    backgroundColor: 'transparent',\n    borderColor: 'red',\n    borderWidth: 2,\n};\n\nexport const textStyle: Partial<TextStyle> = {\n    color: 'yellow',\n    fontSize: 30,\n};\n","import {onKeyDown} from '~/utils/dom';\nimport {KEYBOARD_KEY} from '~/constants/keyboard';\n\nimport {Button} from '../../entities/button';\nimport {Text} from '../../entities/text';\nimport logo from '../../assets/text-logo.png';\nimport font from '../../assets/space-invaders.woff';\nimport {GAME_FONT_NAME, GAME_STATE} from '../constants';\nimport type {Game} from '..';\n\nimport {\n    buttonHeight,\n    buttonStyle,\n    buttonWidth,\n    textStyle,\n} from './constants';\n\nconst image = new Image();\nconst imageLoaded = new Promise<boolean>(resolve => {\n    image.onload = () => resolve(true);\n    image.onerror = () => resolve(false);\n});\nimage.src = logo.src;\n\nconst fontFace = new FontFace(GAME_FONT_NAME, `url(${font})`);\nconst fontLoaded = fontFace.load().then(result => {\n    document.fonts.add(result);\n    return true;\n});\n\nexport async function init(this: Game) {\n    const canvas = this.canvas;\n    const context = this.context;\n\n    const texts = [\n        new Text({\n            position: {\n                x: 80,\n                y: canvas.height / 2,\n            },\n            style: {\n                fontSize: 24,\n                textAlign: 'left',\n            },\n            value: 'Left - Move left',\n        }),\n        new Text({\n            position: {\n                x: 80,\n                y: canvas.height / 2 + 30,\n            },\n            style: {\n                fontSize: 24,\n                textAlign: 'left',\n            },\n            value: 'Right - Move right',\n        }),\n        new Text({\n            position: {\n                x: 80,\n                y: canvas.height / 2 + 60,\n            },\n            style: {\n                fontSize: 24,\n                textAlign: 'left',\n            },\n            value: 'Space - Fire',\n        }),\n    ];\n\n    texts.forEach(text => text.draw(context));\n\n    const button = new Button({\n        canvas,\n        position: {\n            x: canvas.width / 2 - buttonWidth / 2,\n            y: canvas.height * (3 / 4) - buttonHeight,\n        },\n        size: {\n            width: buttonWidth,\n            height: buttonHeight,\n        },\n        text: new Text({\n            value: 'Start',\n            style: textStyle,\n        }),\n        style: buttonStyle,\n        onDown: () => {\n            const event = new KeyboardEvent('keydown', {key: KEYBOARD_KEY.SPACE});\n            document.dispatchEvent(event);\n        },\n    });\n\n    await fontLoaded && button.draw(context);\n\n    const imageOffset = 40;\n    const imageWidth = canvas.width - imageOffset;\n    const imageScale = logo.width / imageWidth;\n    const imageHeight = logo.height / imageScale;\n\n    await imageLoaded && context.drawImage(\n        image,\n        imageOffset / 2,\n        canvas.height / 5,\n        imageWidth,\n        imageHeight,\n    );\n\n    const unmount = onKeyDown(KEYBOARD_KEY.SPACE, () => {\n        this.changeState(GAME_STATE.RUN);\n    });\n\n    this.garbage.add(button.unmount);\n    this.garbage.add(unmount);\n}\n","import {GAME_STATE} from './constants';\nimport {end} from './end';\nimport {run} from './run';\nimport {init} from './init';\nimport type {GameState} from './types';\n\nexport class Game {\n    canvas: HTMLCanvasElement;\n    context: CanvasRenderingContext2D;\n\n    rafId!: number;\n    garbage: Set<() => void> = new Set();\n\n    init: (params?: any) => void;\n    run: (params?: any) => void;\n    end: (params?: any) => void;\n\n    constructor(canvas: HTMLCanvasElement) {\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d')!;\n\n        this.init = init;\n        this.run = run;\n        this.end = end;\n    }\n\n    clear() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    changeState(state: GameState, params?: Record<string, any>) {\n        this.unmount();\n        this.clear();\n\n        switch (state) {\n            case GAME_STATE.INIT: {\n                this.init(params);\n                break;\n            }\n            case GAME_STATE.RUN: {\n                this.run(params);\n                break;\n            }\n            case GAME_STATE.END: {\n                this.end(params);\n                break;\n            }\n            default: {\n                break;\n            }\n        }\n    }\n\n    unmount() {\n        this.garbage.forEach(cb => cb());\n        this.garbage.clear();\n\n        cancelAnimationFrame(this.rafId);\n    }\n}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./style.m.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./style.m.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import {useEffect, useRef} from 'react';\n\nimport {resetFocus} from '~/utils/dom';\n\nimport {Game} from './game';\nimport css from './style.m.css';\n\nconst Content = () => {\n    const ref = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n\n        resetFocus();\n        const game = new Game(canvas);\n        game.init();\n\n        return () => {\n            game.clear();\n        };\n    }, []);\n\n    return (\n        <div className={css.root}>\n            <canvas ref={ref} width={400} height={700} className={css.canvas} />\n        </div>\n    );\n};\n\nexport default Content;\n","export const resetFocus = () => {\n    const element = document.activeElement as HTMLElement | null;\n    if (!element) return;\n    element.blur();\n};\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","locals","exports","url","options","String","__esModule","default","test","slice","hash","needQuotes","concat","replace","srcSet","images","path","width","height","src","toString","placeholder","GAME_FONT_NAME","GAME_STATE","INIT","RUN","END","isDefined","value","undefined","Entity","setPosition","x","y","this","setSize","centerX","centerY","rect","bounds","top","bottom","left","right","collides","entity","a","b","Math","max","min","getEventHandler","handler","event","preventDefault","target","getBoundingClientRect","offsetX","offsetY","touch","changedTouches","clientX","clientY","initialWidth","initialHeight","getEventCoords","Button","constructor","canvas","position","size","style","text","onDown","onMouseDown","onUp","onMouseUp","super","textAlign","textBaseline","downHandler","upHandler","addEventListener","unmount","removeEventListener","draw","context","fillStyle","backgroundColor","fillRect","strokeStyle","borderColor","lineWidth","borderWidth","strokeRect","Text","color","fontFamily","fontSize","measure","font","metrics","measureText","actualBoundingBoxLeft","actualBoundingBoxRight","fontBoundingBoxAscent","fontBoundingBoxDescent","fillText","titleFontSize","subtitleFontSize","buttonFontSize","buttonWidth","buttonHeight","buttonStyle","end","score","title","subtitle","button","KeyboardEvent","key","document","dispatchEvent","garbage","add","setTimeout","onKeyDown","changeState","Invader","speedX","speedY","sprites","spriteIndex","image","toggleImage","moveX","moveY","toggleMoveDirection","speedUp","drawImage","makeSvgImage","img","Image","encodeURIComponent","Object","entries","alienTop1","alienTop2","alienMid1","alienMid2","alienBot1","alienBot2","reduce","acc","invadersConfigs","invadersMaxWidth","map","invaders","setup","ctx","runtime","iids","flatMap","offset","result","Array","from","length","_","i","forEach","invader","iid","setInterval","Set","clearInterval","raf","rowEnd","invaderBounds","player","gameover","onKeyUp","onKeyEvent","Bullet","speed","move","Player","moveLeft","moveRight","fire","bullet","delete","textStyle","buttonsConfig","modules","playerWidth","controls","rightPressed","leftPressed","clearKeyDownLeft","clearKeyDownRight","clearKeyUpLeft","clearKeyUpRight","gap","buttons","run","filter","cb","clear","rafId","requestAnimationFrame","imageLoaded","Promise","resolve","onload","onerror","fontLoaded","FontFace","load","then","fonts","init","imageWidth","imageScale","imageHeight","imageOffset","Game","getContext","clearRect","state","params","cancelAnimationFrame","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","ref","useRef","useEffect","current","resetFocus","game","className","element","activeElement","blur"],"sourceRoot":""}